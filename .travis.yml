language: python
python:
  - "2.7"

# command to install dependencies
install: "pip install -r requirements.txt"

env:
  - DEBUG=1

cache: pip
cache:
  directories:
    - db


before_script:
  - mkdir -p db;
  - wget http://dynamodb-local.s3-website-us-west-2.amazonaws.com/dynamodb_local_latest.tar.gz -O dynamodb_local_latest.tar.gz;
  - tar -xf dynamodb_local_latest.tar.gz -C db
  - cd db
  - java -Djava.library.path=./DynamoDBLocal_lib -jar DynamoDBLocal.jar -sharedDb &
  - cd ..
  - git clone https://github.com/petermitrano/my_cookbook_recipes
  - cd my_cookbook_recipes/recipes_api/tests
  - python initialize_recipes_table.py
  - cd ../../..

# command to run tests
script:
  - nosetests --verbose -a \!wip
